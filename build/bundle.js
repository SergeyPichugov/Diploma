(()=>{"use strict";var e,t,n,l,o,r,a,s,c,i,d,u,m,p,y,f,v,h,g,E,b,k;v=document.querySelector(".clubs-list ul"),h=document.getElementById("free_visit_form"),g=document.getElementById("callback_form"),E=document.querySelector(".fixed-gift"),b=document.getElementById("gift"),k=document.getElementById("thanks"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".clubs-list")&&("block"===v.style.display?v.style.display="none":v.style.display="block"),t.getAttribute("href")&&"#"===t.getAttribute("href").charAt(0)&&function(e){var t=e.getAttribute("href").substring(1);document.getElementById(t)&&(event.preventDefault(),document.getElementById(t).scrollIntoView({block:"start",behavior:"smooth"}))}(t),t.closest(".open-popup")&&(h.style.display="block"),(t.closest(".close_icon")||t.closest(".overlay")||t.closest(".close-btn"))&&(h.style.display="none",g.style.display="none",k.style.display="none",b&&(b.style.display="none")),t.closest(".callback-btn")&&t.closest(".head-main")&&(g.style.display="block"),t.closest(".fixed-gift")&&(b.style.display="block",E.style.display="none")})),function(){var e=document.getElementById("thanks"),t=e.querySelector(".form-content p"),n=document.querySelector("body"),l=document.createElement("div");l.style.cssText="font-size: 2rem";var o=document.createElement("img");o.src="./images/294.svg";var r=function(){e.style.display="block"};n.addEventListener("submit",(function(n){n.preventDefault();var a=n.target;if(!(a.querySelector('[name="phone"]').value.length<7)){a.appendChild(l),l.appendChild(o);var s,c=new FormData(a),i={};c.forEach((function(e,t){i[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(i).then((function(t){if(200!==t.status)throw new Error("status network not 200");var n,o;n=document.getElementById("free_visit_form"),o=document.getElementById("callback_form"),n.style.display="none",o.style.display="none",r(),l.textContent="",setTimeout((function(){return e.style.display="none"}),4e3)})).catch((function(e){r(),t.innerHTML="но что-то пошло не так...",l.textContent="",console.error(e)})),(s=a).querySelectorAll("input").forEach((function(e,t){s.querySelector('[name="phone"]')!==e&&s.querySelector('[name="name"]')!==e||(e.value=""),s.querySelector('[type="checkbox"]')!==e&&s.querySelectorAll('[name="club-name"]')[t]!==e||(e.checked=!1)}))}}))}(),document.addEventListener("input",(function(e){var t,n=e.target;"tel"===n.type&&(/[+\d]/gi.test((t=e).data)||(t.target.value=t.target.value.replace(/[^+\d]/gi,"")),t.target.value=t.target.value.replace(/(.{12}).*/gi,"$1"),/^[78]/gi.test(t.target.value)&&(t.target.value=t.target.value.replace(/[+]/gi,""),t.target.value=t.target.value.replace(/([\d]{11})\d*/gi,"$1")),n.value.length<7?n.setCustomValidity("минимум 7 цифр"):n.setCustomValidity("")),"name"===n.name&&function(e){/[а-я\s]/gi.test(e.data)||(e.target.value=e.target.value.replace(/[^а-я\s]/gi,""))}(e)})),document.addEventListener("click",(function(e){var t=e.target;if(("send"===t.name||"send1"===t.name||t.matches(".card-order-btn"))&&(t.closest("form").querySelector('[type="checkbox"]').checked?t.setCustomValidity(""):t.setCustomValidity("необходимо подтвердить согласие на обработку персональных данных")),t.closest("#footer_form")&&t.matches(".callback-btn")){var n=t.closest("form").querySelectorAll('[type="radio"]');n[0].checked||n[1].checked?t.setCustomValidity(""):t.setCustomValidity("необходимо выбрать клуб")}})),a=document.getElementById("card_order"),s=document.querySelectorAll(".time input"),c=a.querySelectorAll(".club input"),i=document.querySelector(".price input"),d=document.getElementById("price-total"),u=1,m="",p=[],y=function(){var e=1;s.forEach((function(e,t){e.checked&&(u=p[t])})),i&&"ТЕЛО2020"===i.value&&(e=.7);var t=Math.floor(u*e);d.textContent=t},f=function(){c.forEach((function(e){e.checked&&(m=e.value)})),fetch("/".concat(m,".html")).then((function(e){if(200!==e.status)throw new Error("status network not 200");return e.text()})).then((function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll(".cards-types input"),l=t.querySelectorAll(".cards-types .cost");p=[],n.forEach((function(e,t){"s"===e.value.slice(-1)&&p.push(parseInt(l[t].textContent))})),y()})).catch((function(e){return console.error(e)}))},d&&f(),a.addEventListener("input",(function(e){var t=e.target;d&&(t.closest(".club input")&&f(),t.closest(".time input")&&y(),t.closest(".price input")&&y())})),(r=document.getElementById("totop")).style.display="none",window.addEventListener("scroll",(function(){var e=document.documentElement.scrollTop,t=document.querySelector(".header-main").offsetHeight;r.style.display=e<t?"none":"block"})),l=document.querySelector(".top-menu"),o=document.querySelector(".head-main").getBoundingClientRect().height,window.addEventListener("scroll",(function(){l.scrollWidth<768?(o<window.pageYOffset&&(l.style.position="fixed"),o>window.pageYOffset&&(l.style.position="")):l.style.position=""})),n=document.querySelector(".popup-menu"),document.addEventListener("click",(function(e){var t=e.target;t.closest(".top-menu img")&&(n.style.display="flex"),(t.closest(".close-menu-btn")||t.closest(".scroll"))&&(n.style.display="none")})),e=document.querySelectorAll(".main-slider .slide"),t=0,setInterval((function(){e[t].style.display="none",++t>=e.length&&(t=0),e[t].style.display="flex"}),3e3),function(){var e=document.querySelector(".gallery-slider"),t=document.querySelectorAll(".gallery-slider .slide"),n=document.createElement("style");n.textContent="\n\t\t\t\t.active-item{\n               opacity: 1 !important;;\n\t\t\t\t}\n            .item-slider{\n               position: absolute;\n               left: auto;\n               opacity: 0;\n               -webkit-transition: opacity .5s;\n               transition: opacity .5s\n               top: 50%;\n               left: 50%;\n               transform: translate(-50% , 0%);\n            }\n\t\t\t",document.head.appendChild(n),e.style.position="relative",e.style.height="400px",t.forEach((function(e){e.classList.add("item-slider")})),t[0].classList.add("active-item");var l=document.createElement("ul");l.classList.add("slider-dots"),e.append(l),t.forEach((function(e,t){var n=document.createElement("li");l.append(n);var o=document.createElement("button");n.append(o),0===t&&n.classList.add("slick-active")}));for(var o=0;o<2;o++){var r=document.createElement("a");e.append(r);var a=document.createElement("span");r.append(a),r.classList.add("slider-arrow"),0===o?r.classList.add("prev"):r.classList.add("next")}var s,c=document.querySelectorAll(".slider-dots li"),i=0,d=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},m=function(){d(t,i,"active-item"),d(c,i,"slick-active"),++i>=t.length&&(i=0),u(t,i,"active-item"),u(c,i,"slick-active")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;s=setInterval(m,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".slider-dots li button, .slider-arrow span")&&(d(t,i,"active-item"),d(c,i,"slick-active"),n.matches(".next span")?i++:n.matches(".prev span")?i--:n.matches(".slider-dots li button")&&c.forEach((function(e,t){e===n.closest("li")&&(i=t)})),i>=t.length&&(i=0),i<0&&(i=t.length-1),u(t,i,"active-item"),u(c,i,"slick-active"))})),e.addEventListener("mouseover",(function(e){(e.target.matches(".slider-dots li button")||e.target.matches(".slider-arrow span"))&&clearInterval(s)})),e.addEventListener("mouseout",(function(e){(e.target.matches(".slider-dots li button")||e.target.matches(".slider-arrow span"))&&p()})),p(2e3)}(),function(){for(var e=document.querySelector(".services-slider"),t=document.querySelector(".wrap_slid_el"),n=document.querySelectorAll(".services-slider .slide"),l=Math.floor(20),o=0;o<5;o++){var r=n[n.length-1-o].cloneNode(!0);e.prepend(r)}n=document.querySelectorAll(".services-slider .slide");var a=document.createElement("style");a.textContent="\n\t\t\t\t.wrap_slid_el {\n\t\t\t\t\toverflow: hidden !important;\n               position: relative !important;\n\t\t\t\t}\n\t\t\t\t.services-slider{\n\t\t\t\t\tdisplay: flex !important;\n               padding: 0;\n\t\t\t\t}\n\t\t\t\t.services-slider .slide{\n\t\t\t\t\tdisplay: flex !important;\n\t\t\t\t\tjustify-content: right;\n\t\t\t\t\tflex: 0 0 ".concat(l,"% !important;\n               flex-wrap: wrap;\n               flex-direction: column;\n\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t}\n\t\t\t"),document.head.appendChild(a);for(var s=0;s<2;s++){var c=document.createElement("a");t.append(c);var i=document.createElement("span");c.append(i),c.classList.add("slider-arrow"),0===s?c.classList.add("prev"):c.classList.add("next")}var d=5,u=n.length-5;e.style.transform="translateX(-".concat(d*l,"%)");var m=document.querySelector(".wrap_slid_el .prev"),p=document.querySelector(".wrap_slid_el .next"),y=function(){e.addEventListener("transitionend",(function(){10!==d&&0!==d||(d=5,e.style.transition="none",e.style.transform="translateX(-".concat(d*l,"%)"))}))};m.addEventListener("click",(function(){e.style.transition="transform 0.5s",!(d<1)&&d--,e.style.transform="translateX(-".concat(d*l,"%)"),y()})),p.addEventListener("click",(function(){e.style.transition="transform 0.5s",!(d>=u)&&d++,e.style.transform="translateX(-".concat(d*l,"%)"),y()}))}()})();