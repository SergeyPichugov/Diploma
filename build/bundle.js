(()=>{"use strict";var t,e,n,l,o,a,r,s,c,i,d,u,m,p,y,f,v,h,g,E,b,k;v=document.querySelector(".clubs-list ul"),h=document.getElementById("free_visit_form"),g=document.getElementById("callback_form"),E=document.querySelector(".fixed-gift"),b=document.getElementById("gift"),k=document.getElementById("thanks"),document.addEventListener("click",(function(t){var e=t.target;e.closest(".clubs-list")&&("block"===v.style.display?v.style.display="none":v.style.display="block"),e.getAttribute("href")&&"#"===e.getAttribute("href").charAt(0)&&function(t){var e=t.getAttribute("href").substring(1);document.getElementById(e)&&(event.preventDefault(),document.getElementById(e).scrollIntoView({block:"start",behavior:"smooth"}))}(e),e.closest(".open-popup")&&(h.style.display="block"),(e.closest(".close_icon")||e.closest(".overlay")||e.closest(".close-btn"))&&(h.style.display="none",g.style.display="none",k.style.display="none",b&&(b.style.display="none")),e.closest(".callback-btn")&&e.closest(".head-main")&&(g.style.display="block"),e.closest(".fixed-gift")&&(b.style.display="block",E.style.display="none")})),function(){var t=document.getElementById("thanks"),e=t.querySelector(".form-content p"),n=document.querySelector("body"),l=document.createElement("div");l.style.cssText="font-size: 2rem";var o=document.createElement("img");o.src="./images/294.svg";var a=function(){t.style.display="block"};n.addEventListener("submit",(function(n){n.preventDefault();var r=n.target;if(!(r.querySelector('[name="phone"]').value.length<7)){r.appendChild(l),l.appendChild(o);var s,c=new FormData(r),i={};c.forEach((function(t,e){i[e]=t})),function(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(i).then((function(e){if(200!==e.status)throw new Error("status network not 200");var n,o;n=document.getElementById("free_visit_form"),o=document.getElementById("callback_form"),n.style.display="none",o.style.display="none",a(),l.textContent="",setTimeout((function(){return t.style.display="none"}),4e3)})).catch((function(t){a(),e.innerHTML="но что-то пошло не так...",l.textContent="",console.error(t)})),(s=r).querySelectorAll("input").forEach((function(t,e){s.querySelector('[name="phone"]')!==t&&s.querySelector('[name="name"]')!==t||(t.value=""),s.querySelector('[type="checkbox"]')!==t&&s.querySelectorAll('[name="club-name"]')[e]!==t||(t.checked=!1)}))}}))}(),document.addEventListener("input",(function(t){var e,n=t.target;"tel"===n.type&&(/[+\d]/gi.test((e=t).data)||(e.target.value=e.target.value.replace(/[^+\d]/gi,"")),e.target.value=e.target.value.replace(/(.{12}).*/gi,"$1"),/^[78]/gi.test(e.target.value)&&(e.target.value=e.target.value.replace(/[+]/gi,""),e.target.value=e.target.value.replace(/([\d]{11})\d*/gi,"$1")),n.value.length<7?n.setCustomValidity("минимум 7 цифр"):n.setCustomValidity("")),"name"===n.name&&(function(t){/[а-я\s]/gi.test(t.data)||(t.target.value=t.target.value.replace(/[^а-я\s]/gi,""))}(t),n.value.length<2?n.setCustomValidity("слишком короткое имя"):n.value.length>16?n.setCustomValidity("слишком длинное имя"):n.setCustomValidity(""))})),document.addEventListener("click",(function(t){var e=t.target;if(("send"===e.name||"send1"===e.name||e.matches(".card-order-btn"))&&(e.closest("form").querySelector('[type="checkbox"]').checked?e.setCustomValidity(""):e.setCustomValidity("необходимо подтвердить согласие на обработку персональных данных")),e.closest("#footer_form")&&e.matches(".callback-btn")){var n=e.closest("form").querySelectorAll('[type="radio"]');n[0].checked||n[1].checked?e.setCustomValidity(""):e.setCustomValidity("необходимо выбрать клуб")}})),r=document.getElementById("card_order"),s=document.querySelectorAll(".time input"),c=r.querySelectorAll(".club input"),i=document.querySelector(".price input"),d=document.getElementById("price-total"),u=1,m="",p=[],y=function(){var t=1;s.forEach((function(t,e){t.checked&&(u=p[e])})),i&&"ТЕЛО2020"===i.value&&(t=.7);var e=Math.floor(u*t);d.textContent=e},f=function(){c.forEach((function(t){t.checked&&(m=t.value)})),fetch("/".concat(m,".html")).then((function(t){if(200!==t.status)throw new Error("status network not 200");return t.text()})).then((function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.querySelectorAll(".cards-types input"),l=e.querySelectorAll(".cards-types .cost");p=[],n.forEach((function(t,e){"s"===t.value.slice(-1)&&p.push(parseInt(l[e].textContent))})),y()})).catch((function(t){return console.error(t)}))},d&&f(),r.addEventListener("input",(function(t){var e=t.target;d&&(e.closest(".club input")&&f(),e.closest(".time input")&&y(),e.closest(".price input")&&y())})),(a=document.getElementById("totop")).style.display="none",window.addEventListener("scroll",(function(){var t=document.documentElement.scrollTop,e=document.querySelector(".header-main").offsetHeight;a.style.display=t<e?"none":"block"})),l=document.querySelector(".top-menu"),o=document.querySelector(".head-main").getBoundingClientRect().height,window.addEventListener("scroll",(function(){l.scrollWidth<768?(o<window.pageYOffset&&(l.style.position="fixed"),o>window.pageYOffset&&(l.style.position="")):l.style.position=""})),n=document.querySelector(".popup-menu"),document.addEventListener("click",(function(t){var e=t.target;e.closest(".top-menu img")&&(n.style.display="flex"),(e.closest(".close-menu-btn")||e.closest(".scroll"))&&(n.style.display="none")})),t=document.querySelectorAll(".main-slider .slide"),e=0,setInterval((function(){t[e].style.display="none",++e>=t.length&&(e=0),t[e].style.display="flex"}),3e3),function(){var t=document.querySelector(".gallery-slider"),e=document.querySelectorAll(".gallery-slider .slide"),n=document.createElement("style");n.textContent="\n\t\t\t\t.active-item{\n               opacity: 1 !important;;\n\t\t\t\t}\n            .item-slider{\n               position: absolute;\n               left: auto;\n               opacity: 0;\n               -webkit-transition: opacity .5s;\n               transition: opacity .5s\n               top: 50%;\n               left: 50%;\n               transform: translate(-50% , 0%);\n            }\n\t\t\t",document.head.appendChild(n),t.style.position="relative",t.style.height="400px",e.forEach((function(t){t.classList.add("item-slider")})),e[0].classList.add("active-item");var l=document.createElement("ul");l.classList.add("slider-dots"),t.append(l),e.forEach((function(t,e){var n=document.createElement("li");l.append(n);var o=document.createElement("button");n.append(o),0===e&&n.classList.add("slick-active")}));for(var o=0;o<2;o++){var a=document.createElement("a");t.append(a);var r=document.createElement("span");a.append(r),a.classList.add("slider-arrow"),0===o?a.classList.add("prev"):a.classList.add("next")}var s,c=document.querySelectorAll(".slider-dots li"),i=0,d=function(t,e,n){t[e].classList.remove(n)},u=function(t,e,n){t[e].classList.add(n)},m=function(){d(e,i,"active-item"),d(c,i,"slick-active"),++i>=e.length&&(i=0),u(e,i,"active-item"),u(c,i,"slick-active")},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;s=setInterval(m,t)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".slider-dots li button, .slider-arrow span")&&(d(e,i,"active-item"),d(c,i,"slick-active"),n.matches(".next span")?i++:n.matches(".prev span")?i--:n.matches(".slider-dots li button")&&c.forEach((function(t,e){t===n.closest("li")&&(i=e)})),i>=e.length&&(i=0),i<0&&(i=e.length-1),u(e,i,"active-item"),u(c,i,"slick-active"))})),t.addEventListener("mouseover",(function(t){(t.target.matches(".slider-dots li button")||t.target.matches(".slider-arrow span"))&&clearInterval(s)})),t.addEventListener("mouseout",(function(t){(t.target.matches(".slider-dots li button")||t.target.matches(".slider-arrow span"))&&p()})),p(2e3)}(),function(){for(var t=document.querySelector(".services-slider"),e=document.querySelector(".wrap_slid_el"),n=document.querySelectorAll(".services-slider .slide"),l=Math.floor(20),o=0;o<5;o++){var a=n[n.length-1-o].cloneNode(!0);t.prepend(a)}n=document.querySelectorAll(".services-slider .slide");var r=document.createElement("style");r.textContent="\n\t\t\t\t.wrap_slid_el {\n\t\t\t\t\toverflow: hidden !important;\n               position: relative !important;\n\t\t\t\t}\n\t\t\t\t.services-slider{\n\t\t\t\t\tdisplay: flex !important;\n               padding: 0;\n\t\t\t\t}\n\t\t\t\t.services-slider .slide{\n\t\t\t\t\tdisplay: flex !important;\n\t\t\t\t\tjustify-content: right;\n\t\t\t\t\tflex: 0 0 ".concat(l,"% !important;\n               flex-wrap: wrap;\n               flex-direction: column;\n\t\t\t\t\tmargin: 0 !important;\n\t\t\t\t}\n\t\t\t"),document.head.appendChild(r);for(var s=0;s<2;s++){var c=document.createElement("a");e.append(c);var i=document.createElement("span");c.append(i),c.classList.add("slider-arrow"),0===s?c.classList.add("prev"):c.classList.add("next")}var d=5,u=n.length-5;t.style.transform="translateX(-".concat(d*l,"%)");var m=document.querySelector(".wrap_slid_el .prev"),p=document.querySelector(".wrap_slid_el .next"),y=function(){t.addEventListener("transitionend",(function(){10!==d&&0!==d||(d=5,t.style.transition="none",t.style.transform="translateX(-".concat(d*l,"%)"))}))};m.addEventListener("click",(function(){t.style.transition="transform 0.5s",!(d<1)&&d--,t.style.transform="translateX(-".concat(d*l,"%)"),y()})),p.addEventListener("click",(function(){t.style.transition="transform 0.5s",!(d>=u)&&d++,t.style.transform="translateX(-".concat(d*l,"%)"),y()}))}()})();